/**
 * @license
 * EaselJS
 * Visit https://createjs.com for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */
!function(t,e,i){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,i=i&&i.hasOwnProperty("default")?i.default:i;var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},a=function t(){throw n(this,t),new Error("\n\t\t\tStageGL is not currently supported on the EaselJS 2.0 branch.\n\t\t\tEnd of Q1 2018 is targetted for StageGL support.\n\t\t\tFollow @CreateJS on Twitter for updates.\n\t\t")},h=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,t),this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=i,this.cancelable=r,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}return t.prototype.preventDefault=function(){return this.defaultPrevented=this.cancelable,this},t.prototype.stopPropagation=function(){return this.propagationStopped=!0,this},t.prototype.stopImmediatePropagation=function(){return this.immediatePropagationStopped=this.propagationStopped=!0,this},t.prototype.remove=function(){return this.removed=!0,this},t.prototype.clone=function(){var e=new t(this.type,this.bubbles,this.cancelable);for(var i in this)this.hasOwnProperty(i)&&(e[i]=this[i]);return e},t.prototype.set=function(t){for(var e in t)this[e]=t[e];return this},t.prototype.toString=function(){return"["+this.constructor.name+" (type="+this.type+")]"},t}(),l=function(){function t(){n(this,t),this._listeners=null,this._captureListeners=null}return t.initialize=function(e){var i=t.prototype;e.addEventListener=i.addEventListener,e.on=i.on,e.removeEventListener=e.off=i.removeEventListener,e.removeAllEventListeners=i.removeAllEventListeners,e.hasEventListener=i.hasEventListener,e.dispatchEvent=i.dispatchEvent,e._dispatchEvent=i._dispatchEvent,e.willTrigger=i.willTrigger},t.prototype.addEventListener=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=void 0,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&(this.removeEventListener(t,e,i),r=n[t]),r?r.push(e):n[t]=[e],e},t.prototype.on=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},t.prototype.removeEventListener=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this._captureListeners:this._listeners;if(i){var n=i[t];if(n)for(var r=n.length,s=0;s<r;s++)if(n[s]===e){1===r?delete i[t]:n.splice(s,1);break}}},t.prototype.off=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.removeEventListener(t,e,i)},t.prototype.removeAllEventListeners=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},t.prototype.dispatchEvent=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new h(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o=s.length,a=void 0;for(a=o-1;a>=0&&!t.propagationStopped;a--)s[a]._dispatchEvent(t,1+(0==a));for(a=1;a<o&&!t.propagationStopped;a++)s[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},t.prototype.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},t.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},t.prototype.toString=function(){return"["+(this.constructor.name+this.name?" "+this.name:"")+"]"},t.prototype._dispatchEvent=function(t,e){var i=1===e?this._captureListeners:this._listeners;if(t&&i){var n=i[t.type],r=void 0;if(!n||0===(r=n.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,n=n.slice();for(var s=0;s<r&&!t.immediatePropagationStopped;s++){var o=n[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1===e),t.removed=!1)}}},t}(),u=0,c=function(){function t(){throw n(this,t),"UID cannot be instantiated"}return t.get=function(){return t._nextID++},r(t,null,[{key:"_nextID",get:function(){return u},set:function(t){u=t}}]),t}(),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.setValues(e,i)}return t.prototype.setValues=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t,this.y=e,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.toString=function(){return"["+this.constructor.name+" (x="+this.x+" y="+this.y+")]"},t}(),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.setValues(e,i,r,s,o,a)}return t.prototype.setValues=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.append=function(t,e,i,n,r,s){var o=this.a,a=this.b,h=this.c,l=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=o*t+h*e,this.b=a*t+l*e,this.c=o*i+h*n,this.d=a*i+l*n),this.tx=o*r+h*s+this.tx,this.ty=a*r+l*s+this.ty,this},t.prototype.prepend=function(t,e,i,n,r,s){var o=this.a,a=this.c,h=this.tx;return this.a=t*o+i*this.b,this.b=e*o+n*this.b,this.c=t*a+i*this.d,this.d=e*a+n*this.d,this.tx=t*h+i*this.ty+r,this.ty=e*h+n*this.ty+s,this},t.prototype.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.appendTransform=function(e,i,n,r,s,o,a,h,l){var u=void 0,c=void 0,p=void 0;return s%360?(u=s*t.DEG_TO_RAD,c=Math.cos(u),p=Math.sin(u)):(c=1,p=0),o||a?(o*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),e,i),this.append(c*n,p*n,-p*r,c*r,0,0)):this.append(c*n,p*n,-p*r,c*r,e,i),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},t.prototype.prependTransform=function(e,i,n,r,s,o,a,h,l){var u=void 0,c=void 0,p=void 0;return s%360?(u=s*t.DEG_TO_RAD,c=Math.cos(u),p=Math.sin(u)):(c=1,p=0),(h||l)&&(this.tx-=h,this.ty-=l),o||a?(o*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.prepend(c*n,p*n,-p*r,c*r,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),e,i)):this.prepend(c*n,p*n,-p*r,c*r,e,i),this},t.prototype.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),n=Math.sin(e),r=this.a,s=this.b;return this.a=r*i+this.c*n,this.b=s*i+this.d*n,this.c=-r*n+this.c*i,this.d=-s*n+this.d*i,this},t.prototype.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},t.prototype.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},t.prototype.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.prototype.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},t.prototype.transformPoint=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p;return i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},t.prototype.decompose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a);return Math.abs(1-i/n)<1e-5?(e.rotation=n/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=n/t.DEG_TO_RAD),e},t.prototype.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.toString=function(){return"["+this.constructor.name+" (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t}();d.DEG_TO_RAD=Math.PI/180,d.identity=new d;var f=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments[2],s=arguments[3],o=arguments[4];n(this,t),this.setValues(e,i,r,s,o)}return t.prototype.setValues=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments[2],n=arguments[3],r=arguments[4];return this.visible=t,this.alpha=e,this.shadow=i,this.compositeOperation=n,this.matrix=r||this.matrix&&this.matrix.identity()||new d,this},t.prototype.append=function(t,e,i,n,r){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=n||this.compositeOperation,this.visible=this.visible&&t,r&&this.matrix.appendMatrix(r),this},t.prototype.prepend=function(t,e,i,n,r){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||n,this.visible=this.visible&&t,r&&this.matrix.prependMatrix(r),this},t.prototype.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},t.prototype.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},t}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.setValues(e,i,r,s)}return t.prototype.setValues=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x=t,this.y=e,this.width=i,this.height=n,this},t.prototype.extend=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t+i>this.x+this.width&&(this.width=t+i-this.x),e+n>this.y+this.height&&(this.height=e+n-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},t.prototype.pad=function(t,e,i,n){return this.x-=e,this.y-=t,this.width+=e+n,this.height+=t+i,this},t.prototype.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},t.prototype.contains=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+n<=this.y+this.height},t.prototype.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},t.prototype.intersection=function(e){var i=e.x,n=e.y,r=i+e.width,s=n+e.height;return this.x>i&&(i=this.x),this.y>n&&(n=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),r<=i||s<=n?null:new t(i,n,r-i,s-n)},t.prototype.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},t.prototype.isEmpty=function(){return this.width<=0||this.height<=0},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.toString=function(){return"["+this.constructor.name+" (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},t}(),g=function(){function t(){n(this,t),this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}return t.prototype.getBounds=function(t){return t},t.prototype.shaderParamSetup=function(t,e,i){},t.prototype.applyFilter=function(t,e,i,n,r,s,o,a){s=s||t,null==o&&(o=e),null==a&&(a=i);try{var h=t.getImageData(e,i,n,r);if(this._applyFilter(h))return s.putImageData(h,o,a),!0}catch(t){}return!1},t.prototype.toString=function(){return"["+this.constructor.name+"]"},t.prototype.clone=function(){return new t},t.prototype._applyFilter=function(t){return!0},t}(),_=function(t){function e(){n(this,e);var i=o(this,t.call(this));return i.width=void 0,i.height=void 0,i.x=void 0,i.y=void 0,i.scale=1,i.offX=0,i.offY=0,i.cacheID=0,i._filterOffX=0,i._filterOffY=0,i._cacheDataURLID=0,i._cacheDataURL=null,i._drawWidth=0,i._drawHeight=0,i._boundRect=new v,i}return s(e,t),e.getFilterBounds=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v,i=t.filters,n=i&&i.length;if(!!n<=0)return e;for(var r=0;r<n;r++){var s=i[r];if(s&&s.getBounds){var o=s.getBounds();o&&(0==r?e.setValues(o.x,o.y,o.width,o.height):e.extend(o.x,o.y,o.width,o.height))}}return e},e.prototype.define=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments[6];if(!t)throw"No symbol to cache";this._options=o,this._useWebGL=void 0!==o,this.target=t,this.width=n>=1?n:1,this.height=r>=1?r:1,this.x=e,this.y=i,this.scale=s,this.update()},e.prototype.update=function(t){if(!this.target)throw"define() must be called before update()";var i=e.getFilterBounds(this.target),n=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+i.width,this._drawHeight=Math.ceil(this.height*this.scale)+i.height,n&&this._drawWidth==n.width&&this._drawHeight==n.height||this._updateSurface(),this._filterOffX=i.x,this._filterOffY=i.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(t),this.cacheID=this.cacheID?this.cacheID+1:1},e.prototype.release=function(){var t=this.target.stage;this._useWebGL&&this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):t instanceof a&&t.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1},e.prototype.getCacheDataURL=function(){var t=this.target&&this.target.cacheCanvas;return t?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=t.toDataURL?t.toDataURL():null),this._cacheDataURL):null},e.prototype.draw=function(t){return!!this.target&&(t.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0)},e.prototype.getBounds=function(){var t=this.scale;return this._boundRect.setValue(this._filterOffX/t,this._filterOffY/t,this.width/t,this.height/t)},e.prototype._updateSurface=function(){var t=void 0;if(!this._useWebGL)return(t=this.target.cacheCanvas)||(t=this.target.cacheCanvas=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),t.width=this._drawWidth,void(t.height=this._drawHeight);if(!this._webGLCache)if("stage"===this._options.useGL){if(null==this.target.stage||!this.target.stage.isWebGL)throw"Cannot use 'stage' for cache because the object's parent stage is "+(null!=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage.");this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else{if("new"!==this._options.useGL)throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new a(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0}var e=this._webGLCache;t=this.target.cacheCanvas,e.isCacheControlled&&(t.width=this._drawWidth,t.height=this._drawHeight,e.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):e.isCacheControlled||e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)},e.prototype._drawToCache=function(t){var e=this.target,i=e.cacheCanvas,n=this._webGLCache;if(!this._useWebGL||!n){var r=i.getContext("2d");return t||r.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),r.save(),r.globalCompositeOperation=t,r.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),r.translate(-this.x,-this.y),e.draw(r,!0),r.restore(),e.filters&&e.filters.length&&this._applyFilters(e),void(i._invalid=!0)}this._webGLCache.cacheDraw(e,e.filters,this),(i=this.target.cacheCanvas).width=this._drawWidth,i.height=this._drawHeight,i._invalid=!0},e.prototype._applyFilters=function(){for(var t=this.target.cacheCanvas,e=this.target.filters,i=this._drawWidth,n=this._drawHeight,r=t.getContext("2d").getImageData(0,0,i,n),s=e.length,o=0;o<s;o++)e[o]._applyFilter(r);t.getContext("2d").putImageData(r,0,0)},e}(g),m=function(t){function e(){n(this,e);var i=o(this,t.call(this));return i.alpha=1,i.cacheCanvas=null,i.bitmapCache=null,i.id=c.get(),i.mouseEnabled=!0,i.tickEnabled=!0,i.name=null,i.parent=null,i.regX=0,i.regY=0,i.rotation=0,i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.shadow=null,i.visible=!0,i.x=0,i.y=0,i.transformMatrix=null,i.compositeOperation=null,i.snapToPixel=!0,i.filters=null,i.mask=null,i.hitArea=null,i.cursor=null,i._props=new f,i._rectangle=new v,i._bounds=null,i._webGLRenderStyle=e._StageGL_NONE,i}return s(e,t),e.prototype.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.prototype.draw=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.drawCache(t,e)},e.prototype.drawCache=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.bitmapCache;return!(!i||e)&&i.draw(t)},e.prototype.updateContext=function(t){var i=this,n=i.mask,r=i._props.matrix;n&&n.graphics&&!n.graphics.isEmpty()&&(n.getMatrix(r),t.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),n.graphics.drawAsPath(t),t.clip(),r.invert(),t.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),this.getMatrix(r);var s=r.tx,o=r.ty;e._snapToPixelEnabled&&i.snapToPixel&&(s=s+(s<0?-.5:.5)|0,o=o+(o<0?-.5:.5)|0),t.transform(r.a,r.b,r.c,r.d,s,o),t.globalAlpha*=i.alpha,i.compositeOperation&&(t.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(t,i.shadow)},e.prototype.cache=function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments[5];this.bitmapCache||(this.bitmapCache=new _),this.bitmapCache.define(this,t,e,i,n,r,s)},e.prototype.updateCache=function(t){if(!this.bitmapCache)throw"cache() must be called before updateCache()";this.bitmapCache.update(t)},e.prototype.uncache=function(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)},e.prototype.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null},e.prototype.localToGlobal=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p;return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i)},e.prototype.globalToLocal=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p;return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i)},e.prototype.localToLocal=function(t,e,i,n){return n=this.localToGlobal(t,e,n),i.globalToLocal(n.x,n.y,n)},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.x=t,this.y=e,this.scaleX=i,this.scaleY=n,this.rotation=r,this.skewX=s,this.skewY=o,this.regX=a,this.regY=h,this},e.prototype.getMatrix=function(t){var e=this,i=t&&t.identity()||new d;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.prototype.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.prototype.getConcatenatedDisplayProps=function(t){t=t?t.identity():new f;var e=this,i=e.getMatrix(t.matrix);do{t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix))}while(e=e.parent);return t},e.prototype.hitTest=function(t,i){var n=e._hitTestContext;n.setTransform(1,0,0,1,-t,-i),this.draw(n);var r=this._testHit(n);return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,2,2),r},e.prototype.set=function(t){for(var e in t)this[e]=t[e];return this},e.prototype.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.prototype.getTransformedBounds=function(){return this._getBounds()},e.prototype.setBounds=function(t,e,i,n){null==t&&(this._bounds=t),this._bounds=(this._bounds||new v).setValues(t,e,i,n)},e.prototype.clone=function(){return this._cloneProps(new e)},e.prototype.toString=function(){return"["+this.constructor.name+(this.name?" (name="+this.name+")":"")+"]"},e.prototype._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e.prototype._applyShadow=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Shadow.identity;e=e,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e.prototype._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e.prototype._testHit=function(t){try{return t.getImageData(0,0,1,1).data[3]>1}catch(t){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";return!1}},e.prototype._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e.prototype._transformBounds=function(t,e,i){if(!t)return t;var n=t.x,r=t.y,s=t.width,o=t.height,a=this._props.matrix;a=i?a.identity():this.getMatrix(a),(n||r)&&a.appendTransform(0,0,1,1,0,0,0,-n,-r),e&&a.prependMatrix(e);var h=s*a.a,l=s*a.b,u=o*a.c,c=o*a.d,p=a.tx,d=a.ty,f=p,v=p,g=d,_=d;return(n=h+p)<f?f=n:n>v&&(v=n),(n=h+u+p)<f?f=n:n>v&&(v=n),(n=u+p)<f?f=n:n>v&&(v=n),(r=l+d)<g?g=r:r>_&&(_=r),(r=l+c+d)<g?g=r:r>_&&(_=r),(r=c+d)<g?g=r:r>_&&(_=r),t.setValues(f,g,v-f,_-g)},e.prototype._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,i=0,n=t.length;i<n;i++)if(this.hasEventListener(t[i]))return!0;return!!this.cursor},r(e,[{key:"stage",get:function(){for(var t=this;t.parent;)t=t.parent;return/^\[Stage(GL)?(\s\(name=\w+\))?\]$/.test(t.toString())?t:null}},{key:"scale",get:function(){return this.scaleX},set:function(t){this.scaleX=this.scaleY=t}}]),e}(l),y=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");y.getContext&&(m._hitTestCanvas=y,m._hitTestContext=y.getContext("2d"),y.width=y.height=1),m._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],m.suppressCrossDomainErrors=!1,m.snapToPixelEnabled=!1,m._StageGL_NONE=0,m._StageGL_SPRITE=1,m._StageGL_BITMAP=2;var w=function(t){function e(){n(this,e);var i=o(this,t.call(this));return i.children=[],i.mouseChildren=!0,i.tickChildren=!0,i}return s(e,t),e.prototype.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.prototype.draw=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.prototype.draw.call(this,e,i))return!0;for(var n=this.children.slice(),r=0,s=n.length;r<s;r++){var o=n[r];o.isVisible()&&(e.save(),o.updateContext(e),o.draw(e),e.restore())}return!0},e.prototype.addChild=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.length;if(0===n)return null;var r=e[0];if(n>1){for(var s=0;s<n;s++)r=this.addChild(e[s]);return r}var o=r.parent,a=o===this;return o&&o._removeChildAt(o.children.indexOf(r),a),r.parent=this,this.children.push(r),a||r.dispatchEvent("added"),r},e.prototype.addChildAt=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.length;if(0===n)return null;var r=e.pop();if(r<0||r>this.children.length)return e[n-2];if(n>2){for(var s=0;s<n-1;s++)this.addChildAt(e[s],r++);return e[n-2]}var o=e[0],a=o.parent,h=a===this;return a&&a._removeChildAt(a.children.indexOf(o),h),o.parent=this,this.children.splice(r++,0,o),h||o.dispatchEvent("added"),o},e.prototype.removeChild=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.length;if(0===n)return!0;if(n>1){for(var r=!0,s=0;s<n;s++)r=r&&this.removeChild(e[s]);return r}return this._removeChildAt(this.children.indexOf(e[0]))},e.prototype.removeChildAt=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.length;if(0===n)return!0;if(n>1){e.sort(function(t,e){return e-t});for(var r=!0,s=0;s<n;s++)r=r&&this._removeChildAt(e[s]);return r}return this._removeChildAt(e[0])},e.prototype.removeAllChildren=function(){for(var t=this.children;t.length;)this._removeChildAt(0)},e.prototype.getChildAt=function(t){return this.children[t]},e.prototype.getChildByName=function(t){for(var e=this.children,i=e.length,n=0;n<i;n++)if(e[n].name===t)return e[n];return null},e.prototype.sortChildren=function(t){this.children.sort(t)},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.swapChildrenAt=function(t,e){var i=this.children,n=i[t],r=i[e];n&&r&&(i[t]=r,i[e]=n)},e.prototype.swapChildren=function(t,e){for(var i=this.children,n=i.length,r=void 0,s=void 0,o=0;o<n&&(i[o]===t&&(r=o),i[o]===e&&(s=o),null==r||null==s);o++);o!==n&&(i[r]=e,i[s]=t)},e.prototype.setChildIndex=function(t,e){var i=this.children,n=i.length;if(!(t.parent!=this||e<0||e>=n)){for(var r=0;r<n&&i[r]!==t;r++);r!==n&&r!==e&&(i.splice(r,1),i.splice(e,0,t))}},e.prototype.contains=function(t){for(;t;){if(t===this)return!0;t=t.parent}return!1},e.prototype.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.prototype.getObjectsUnderPoint=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[],r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,n,i>0,1===i),n},e.prototype.getObjectUnderPoint=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,null,i>0,1===i)},e.prototype.getBounds=function(){return this._getBounds(null,!0)},e.prototype.getTransformedBounds=function(){return this._getBounds()},e.prototype.clone=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this._cloneProps(new e);return t&&this._cloneChildren(i),i},e.prototype._tick=function(e){if(this.tickChildren)for(var i=this.children.length-1;i>=0;i--){var n=this.children[i];n.tickEnabled&&n._tick&&n._tick(e)}t.prototype._tick.call(this,e)},e.prototype._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=this.children.length,n=0;n<i;n++){var r=this.children[n].clone(!0);r.parent=t,e.push(r)}},e.prototype._removeChildAt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t<0||t>this.children.length-1)return!1;var i=this.children[t];return i&&(i.parent=null),this.children.splice(t,1),e||i.dispatchEvent("removed"),!0},e.prototype._getObjectsUnderPoint=function(t,i,n,r,s){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(!o&&!this._testMask(this,t,i))return null;var a=void 0,h=m._hitTestContext;s=s||r&&this._hasMouseEventListener();for(var l=this.children,u=l.length-1;u>=0;u--){var c=l[u],p=c.hitArea;if(c.visible&&(p||c.isVisible())&&(!r||c.mouseEnabled)&&(p||this._testMask(c,t,i)))if(!p&&c instanceof e){var d=c._getObjectsUnderPoint(t,i,n,r,s,o+1);if(!n&&d)return r&&!this.mouseChildren?this:d}else{if(r&&!s&&!c._hasMouseEventListener())continue;var f=c.getConcatenatedDisplayProps(c._props);if(a=f.matrix,p&&(a.appendMatrix(p.getMatrix(p._props.matrix)),f.alpha=p.alpha),h.globalAlpha=f.alpha,h.setTransform(a.a,a.b,a.c,a.d,a.tx-t,a.ty-i),(p||c).draw(h),!this._testHit(h))continue;if(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!n)return r&&!this.mouseChildren?this:c;n.push(c)}}return null},e.prototype._testMask=function(t,e,i){var n=t.mask;if(!n||!n.graphics||n.graphics.isEmpty())return!0;var r=this._props.matrix,s=t.parent;r=s?s.getConcatenatedMatrix(r):r.identity(),r=n.getMatrix(n._props.matrix).prependMatrix(r);var o=m._hitTestContext;return o.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-i),n.graphics.drawAsPath(o),o.fillStyle="#000",o.fill(),!!this._testHit(o)&&(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,2,2),!0)},e.prototype._getBounds=function(e,i){var n=t.prototype.getBounds.call(this);if(n)return this._transformBounds(n,e,i);var r=this._props.matrix;r=i?r.identity():this.getMatrix(r),e&&r.prependMatrix(e);for(var s=this.children.length,o=null,a=0;a<s;a++){var h=this.children[a];h.visible&&(n=h._getBounds(r))&&(o?o.extend(n.x,n.y,n.width,n.height):o=n.clone())}return o},r(e,[{key:"numChildren",get:function(){return this.children.length}}]),e}(m),x=function(t){function e(i,r,s,a,h,l,u,c,p,d,f){n(this,e);var v=o(this,t.call(this,i,r,s));return v.stageX=a,v.stageY=h,v.rawX=null==p?a:p,v.rawY=null==d?h:d,v.nativeEvent=l,v.pointerID=u,v.primary=!!c,v.relatedTarget=f,v}return s(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.prototype.toString=function(){return"["+this.constructor.name+" (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},r(e,[{key:"localX",get:function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x}},{key:"localY",get:function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y}},{key:"isTouch",get:function(){return-1!==this.pointerID}}]),e}(h),b=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.autoClear=!0,r.canvas="string"==typeof i?document.getElementById(i):i,r.mouseX=0,r.mouseY=0,r.drawRect=null,r.snapToPixelEnabled=!1,r.mouseInBounds=!1,r.tickOnUpdate=!0,r.mouseMoveOutside=!1,r.preventSelection=!0,r._pointerData={},r._pointerCount=0,r._primaryPointerID=null,r._mouseOverIntervalID=null,r._nextStage=null,r._prevStage=null,r.enableDOMEvents(!0),r}return s(e,t),e.prototype.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),!1!==this.dispatchEvent("drawstart",!1,!0))){m._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},e.prototype.tick=function(t){if(this.tickEnabled&&!1!==this.dispatchEvent("tickstart",!1,!0)){var e=new h("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.prototype.handleEvent=function(t){"tick"===t.type&&this.update(t)},e.prototype.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.prototype.toDataURL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",i=void 0,n=this.canvas.getContext("2d"),r=this.canvas.width,s=this.canvas.height;if(t){i=n.getImageData(0,0,r,s);var o=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=t,n.fillRect(0,0,r,s)}var a=this.canvas.toDataURL(e);return t&&(n.putImageData(i,0,0),n.globalCompositeOperation=o),a},e.prototype.enableMouseOver=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0===e&&this._testMouseOver(!0)),e<=0||(this._mouseOverIntervalID=setInterval(function(){return t._testMouseOver()},1e3/Math.min(50,e)))},e.prototype.enableDOMEvents=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this._eventListeners;if(!e&&i){for(var n in i){var r=i[n];r.t.removeEventListener(n,r.f,!1)}this._eventListeners=null}else if(e&&!i&&this.canvas){var s=window.addEventListener?window:document;for(var o in i=this._eventListeners={mouseup:{t:s,f:function(e){return t._handleMouseUp(e)}},mousemove:{t:s,f:function(e){return t._handleMouseMove(e)}},dblclick:{t:this.canvas,f:function(e){return t._handleDoubleClick(e)}},mousedown:{t:this.canvas,f:function(e){return t._handleMouseDown(e)}}}){var a=i[o];a.t.addEventListener&&a.t.addEventListener(o,a.f,!1)}}},e.prototype.clone=function(){throw"Stage cannot be cloned."},e.prototype._getElementRect=function(t){var e=void 0;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),r=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,s=parseInt(r.paddingLeft)+parseInt(r.borderLeftWidth),o=parseInt(r.paddingTop)+parseInt(r.borderTopWidth),a=parseInt(r.paddingRight)+parseInt(r.borderRightWidth),h=parseInt(r.paddingBottom)+parseInt(r.borderBottomWidth);return{left:e.left+i+s,right:e.right+i-a,top:e.top+n+o,bottom:e.bottom+n-h}},e.prototype._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e.prototype._handleMouseMove=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;this._handlePointerMove(-1,t,t.pageX,t.pageY)},e.prototype._handlePointerMove=function(t,e,i,n,r){if((!this._prevStage||void 0!==r)&&this.canvas){var s=this._nextStage,o=this._getPointerData(t),a=o.inBounds;this._updatePointerPosition(t,e,i,n),(a||o.inBounds||this.mouseMoveOutside)&&(-1===t&&o.inBounds===!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,o,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,o,e),this._dispatchMouseEvent(o.target,"pressmove",!0,t,o,e)),s&&s._handlePointerMove(t,e,i,n,null)}},e.prototype._updatePointerPosition=function(t,e,i,n){var r=this._getElementRect(this.canvas);i-=r.left,n-=r.top;var s=this.canvas.width,o=this.canvas.height;i/=(r.right-r.left)/s,n/=(r.bottom-r.top)/o;var a=this._getPointerData(t);(a.inBounds=i>=0&&n>=0&&i<=s-1&&n<=o-1)?(a.x=i,a.y=n):this.mouseMoveOutside&&(a.x=i<0?0:i>s-1?s-1:i,a.y=n<0?0:n>o-1?o-1:n),a.posEvtObj=e,a.rawX=i,a.rawY=n,t!==this._primaryPointerID&&-1!==t||(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)},e.prototype._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e.prototype._handlePointerUp=function(t,e,i,n){var r=this._nextStage,s=this._getPointerData(t);if(!this._prevStage||void 0!==n){var o=null,a=s.target;n||!a&&!r||(o=this._getObjectsUnderPoint(s.x,s.y,null,!0)),s.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,s,e,o),s.down=!1),o===a&&this._dispatchMouseEvent(a,"click",!0,t,s,e),this._dispatchMouseEvent(a,"pressup",!0,t,s,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):s.target=null,r&&r._handlePointerUp(t,e,i,n||o&&this)}},e.prototype._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e.prototype._handlePointerDown=function(t,e,i,n,r){this.preventSelection&&e.preventDefault(),null!=this._primaryPointerID&&-1!==t||(this._primaryPointerID=t),null!=n&&this._updatePointerPosition(t,e,i,n);var s=null,o=this._nextStage,a=this._getPointerData(t);r||(s=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0)),a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e,s),a.down=!0),this._dispatchMouseEvent(s,"mousedown",!0,t,a,e),o&&o._handlePointerDown(t,e,i,n,r||s&&this)},e.prototype._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var n=this._nextStage;if(this._mouseOverIntervalID){var r=this._getPointerData(-1);if(r&&(t||this.mouseX!==this._mouseOverX||this.mouseY!==this._mouseOverY||!this.mouseInBounds)){var s=r.posEvtObj,o=i||s&&s.target===this.canvas,a=null,h=-1,l="";!e&&(t||this.mouseInBounds&&o)&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);for(var u=this._mouseOverTarget||[],c=u[u.length-1],p=this._mouseOverTarget=[],d=a;d;)p.unshift(d),l||(l=d.cursor),d=d.parent;this.canvas.style.cursor=l,!e&&i&&(i.canvas.style.cursor=l);for(var f=0,v=p.length;f<v&&p[f]==u[f];f++)h=f;c!=a&&this._dispatchMouseEvent(c,"mouseout",!0,-1,r,s,a);for(var g=u.length-1;g>h;g--)this._dispatchMouseEvent(u[g],"rollout",!1,-1,r,s,a);for(var _=p.length-1;_>h;_--)this._dispatchMouseEvent(p[_],"rollover",!1,-1,r,s,c);c!=a&&this._dispatchMouseEvent(a,"mouseover",!0,-1,r,s,c),n&&n._testMouseOver(t,e||a&&this,i||o&&this)}}else n&&n._testMouseOver(t,e,i)}},e.prototype._handleDoubleClick=function(t,e){var i=null,n=this._nextStage,r=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(r.x,r.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,r,t)),n&&n._handleDoubleClick(t,e||i&&this)},e.prototype._dispatchMouseEvent=function(t,e,i,n,r,s,o){if(t&&(i||t.hasEventListener(e))){var a=new x(e,i,!1,r.x,r.y,s,n,n===this._primaryPointerID||-1===n,r.rawX,r.rawY,o);t.dispatchEvent(a)}},r(e,[{key:"nextStage",get:function(){return this._nextStage},set:function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t}}]),e}(w),E=function(){function t(e){n(this,t),this.readyState=e.readyState,this._video=e,this._canvas=null,this._lastTime=-1,this.readyState<2&&e.addEventListener("canplaythrough",this._videoReady.bind(this))}return t.prototype.getImage=function(){if(!(this.readyState<2)){var t=this._canvas,e=this._video;if(t||((t=this._canvas=document.createElement("canvas")).width=e.videoWidth,t.height=e.videoHeight),e.readyState>=2&&e.currentTime!==this._lastTime){var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.drawImage(e,0,0,t.width,t.height),this._lastTime=e.currentTime}return t}},t.prototype._videoReady=function(){this.readyState=2},t}(),S=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return"string"==typeof i?(r.image=document.createElement("img"),r.image.src=i):r.image=i,r.sourceRect=null,r._webGLRenderStyle=m._StageGL_BITMAP,r}return s(e,t),e.prototype.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},e.prototype.draw=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.prototype.draw.call(this,e,i))return!0;var n=this.image,r=this.sourceRect;if(n instanceof E&&(n=n.getImage()),null==n)return!0;if(r){var s=r.x,o=r.y,a=s+r.width,h=o+r.height,l=0,u=0,c=n.width,p=n.height;s<0&&(l-=s,s=0),a>c&&(a=c),o<0&&(u-=o,o=0),h>p&&(h=p),e.drawImage(n,s,o,a-s,h-o,l,u,a-s,h-o)}else e.drawImage(n,0,0);return!0},e.prototype.getBounds=function(){var e=t.prototype.getBounds.call(this);if(e)return e;var i=this.image,n=this.sourceRect||i;return i&&(i.naturalWidth||i.getContext||i.readyState>=2)?this._rectangle.setValues(0,0,n.width,n.height):null},e.prototype.clone=function(t){var i=this.image;null!=i&&null!=t&&(i=i.cloneNode());var n=new e(i);return this.sourceRect&&(n.sourceRect=this.sourceRect.clone()),this._cloneProps(n),n},e}(m),T=function(t){function e(i,r){n(this,e);var s=o(this,t.call(this));return s.currentFrame=0,s.currentAnimation=null,s.paused=!0,s.spriteSheet=i,s.currentAnimationFrame=0,s.framerate=0,s._animation=null,s._currentFrame=null,s._skipAdvance=!1,s._webGLRenderStyle=m._StageGL_SPRITE,null!=r&&s.gotoAndPlay(r),s}return s(e,t),e.prototype.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.prototype.draw=function(e,i){if(t.prototype.draw.call(this,e,i))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var r=n.rect;return r.width&&r.height&&e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0},e.prototype.play=function(){this.paused=!1},e.prototype.stop=function(){this.paused=!0},e.prototype.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.prototype.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.prototype.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.prototype.getBounds=function(){return t.prototype.getBounds.call(this)||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.prototype.clone=function(){return this._cloneProps(new e(this.spriteSheet))},e.prototype._cloneProps=function(e){return t.prototype._cloneProps.call(this,e),e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate,e._animation=this._animation,e._currentFrame=this._currentFrame,e._skipAdvance=this._skipAdvance,e},e.prototype._tick=function(e){this.paused||(this._skipAdvance||this.advance(e&&e.delta),this._skipAdvance=!1),t.prototype._tick.call(this,e)},e.prototype._normalizeFrame=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._animation,i=this.paused,n=this._currentFrame;if(e){var r=e.speed||1,s=this.currentAnimationFrame,o=e.frames.length;if(s+t*r>=o){var a=e.next;if(this._dispatchAnimationEnd(e,n,i,a,o-1))return;if(a)return this._goto(a,t-(o-s)/r);this.paused=!0,s=e.frames.length-1}else s+=t*r;this.currentAnimationFrame=s,this._currentFrame=e.frames[0|s]}else{n=this._currentFrame+=t;var h=this.spriteSheet.getNumFrames();if(n>=h&&h>0&&!this._dispatchAnimationEnd(e,n,i,h-1)&&(this._currentFrame-=h)>=h)return this._normalizeFrame()}n=0|this._currentFrame,this.currentFrame!=n&&(this.currentFrame=n,this.dispatchEvent("change"))},e.prototype._dispatchAnimationEnd=function(t,e,i,n,r){var s=t?t.name:null;if(this.hasEventListener("animationend")){var o=new h("animationend");o.name=s,o.next=n,this.dispatchEvent(o)}var a=this._animation!=t||this._currentFrame!=e;return a||i||!this.paused||(this.currentAnimationFrame=r,a=!0),a},e.prototype._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},e}(m),C=100,M=[],D=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,e);var s=o(this,t.call(this));return s.text=i,s.spriteSheet=r,s.lineHeight=0,s.letterSpacing=0,s.spaceWidth=0,s._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},s._oldStage=null,s._drawAction=null,s}return s(e,t),e.prototype.draw=function(e,i){this.drawCache(e,i)||(this._updateState(),t.prototype.draw.call(this,e,i))},e.prototype.getBounds=function(){return this._updateText(),t.prototype.getBounds.call(this)},e.prototype.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.prototype.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},e.prototype.addChild=function(){},e.prototype.addChildAt=function(){},e.prototype.removeChild=function(){},e.prototype.removeChildAt=function(){},e.prototype.removeAllChildren=function(){},e.prototype._updateState=function(){this._updateText()},e.prototype._cloneProps=function(e){return t.prototype._cloneProps.call(this,e),e.lineHeight=this.lineHeight,e.letterSpacing=this.letterSpacing,e.spaceWidth=this.spaceWidth,e},e.prototype._getFrameIndex=function(t,e){var i=void 0,n=e.getAnimation(t);return n||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(n=e.getAnimation(i))),n&&n.frames[0]},e.prototype._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e.prototype._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e.prototype._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e.prototype._tick=function(e){var i=this.stage;i&&i.on("drawstart",this._updateText,this,!0),t.prototype._tick.call(this,e)},e.prototype._updateText=function(){var t=0,i=0,n=this._oldProps,r=!1,s=this.spaceWidth,o=this.lineHeight,a=this.spriteSheet,h=e._spritePool,l=this.children,u=0,c=l.length,p=void 0;for(var d in n)n[d]!=this[d]&&(n[d]=this[d],r=!0);if(r){var f=!!this._getFrame(" ",a);f||s||(s=this._getSpaceWidth(a)),o||(o=this._getLineHeight(a));for(var v=0,g=this.text.length;v<g;v++){var _=this.text.charAt(v);if(" "!==_||f)if("\n"!==_&&"\r"!==_){var m=this._getFrameIndex(_,a);null!=m&&(u<c?p=l[u]:(l.push(p=h.length?h.pop():new T),p.parent=this,c++),p.spriteSheet=a,p.gotoAndStop(m),p.x=t,p.y=i,u++,t+=p.getBounds().width+this.letterSpacing)}else"\r"===_&&"\n"===this.text.charAt(v+1)&&v++,t=0,i+=o;else t+=s}for(;c>u;)h.push(p=l.pop()),p.parent=null,c--;h.length>e.maxPoolSize&&(h.length=e.maxPoolSize)}},r(e,null,[{key:"maxPoolSize",get:function(){return C},set:function(t){C=t}},{key:"_spritePool",get:function(){return M}}]),e}(w),L=function(t){function e(i){n(this,e);var r=o(this,t.call(this));"string"==typeof i&&(i=document.getElementById(i)),r.mouseEnabled=!1;var s=i.style;return s.position="absolute",s.transformOrigin=s.WebkitTransformOrigin=s.msTransformOrigin=s.MozTransformOrigin=s.OTransformOrigin="0% 0%",r.htmlElement=i,r._oldProps=null,r._oldStage=null,r._drawAction=null,r}return s(e,t),e.prototype.isVisible=function(){return null!=this.htmlElement},e.prototype.draw=function(t,e){return!0},e.prototype.cache=function(){},e.prototype.uncache=function(){},e.prototype.updateCache=function(){},e.prototype.hitTest=function(){},e.prototype.localToGlobal=function(){},e.prototype.globalToLocal=function(){},e.prototype.localToLocal=function(){},e.prototype.clone=function(){throw"DOMElement cannot be cloned."},e.prototype._tick=function(e){var i=this.stage;null!=i&&i!==this._oldStage&&(this._drawAction&&i.off("drawend",this._drawAction),this._drawAction=i.on("drawend",this._handleDrawEnd,this),this._oldStage=i),t.prototype._tick.call(this,e)},e.prototype._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var i=e.style,n=this.getConcatenatedDisplayProps(this._props),r=n.matrix,s=n.visible?"visible":"hidden";if(s!=i.visibility&&(i.visibility=s),n.visible){var o=this._oldProps,a=o&&o.matrix,h=1e4;if(!a||!a.equals(r)){var l="matrix("+(r.a*h|0)/h+","+(r.b*h|0)/h+","+(r.c*h|0)/h+","+(r.d*h|0)/h+","+(r.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=l+","+(r.ty+.5|0)+")",i.MozTransform=l+"px,"+(r.ty+.5|0)+"px)",o||(o=this._oldProps=new f(!0,null)),o.matrix.copy(r)}o.alpha!=n.alpha&&(i.opacity=""+(n.alpha*h|0)/h,o.alpha=n.alpha)}}},e}(m),I=function(){function t(){n(this,t),this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.curveTo=this.quadraticCurveTo,this.drawRect=this.rect,this.mt=this.moveTo,this.lt=this.lineTo,this.at=this.arcTo,this.bt=this.bezierCurveTo,this.qt=this.quadraticCurveTo,this.a=this.arc,this.r=this.rect,this.cp=this.closePath,this.c=this.clear,this.f=this.beginFill,this.lf=this.beginLinearGradientFill,this.rf=this.beginRadialGradientFill,this.bf=this.beginBitmapFill,this.ef=this.endFill,this.ss=this.setStrokeStyle,this.sd=this.setStrokeDash,this.s=this.beginStroke,this.ls=this.beginLinearGradientStroke,this.rs=this.beginRadialGradientStroke,this.bs=this.beginBitmapStroke,this.es=this.endStroke,this.dr=this.drawRect,this.rr=this.drawRoundRect,this.rc=this.drawRoundRectComplex,this.dc=this.drawCircle,this.de=this.drawEllipse,this.dp=this.drawPolyStar,this.p=this.decodePath,this.clear()}return t.getRGB=function(t,e,i,n){return null!=t&&null==i&&(n=e,i=255&t,e=t>>8&255,t=t>>16&255),null==n?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+n+")"},t.getHSL=function(t,e,i,n){return null==n?"hsl("+t%360+","+e+"%,"+i+"%)":"hsl("+t%360+","+e+"%,"+i+"%,"+n+")"},t.prototype.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},t.prototype.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,n=i.length,r=this._storeIndex;r<n;r++)i[r].exec(t,e)},t.prototype.drawAsPath=function(t){this._updateInstructions();for(var e=void 0,i=this._instructions,n=i.length,r=this._storeIndex;r<n;r++)!1!==(e=i[r]).path&&e.exec(t)},t.prototype.moveTo=function(t,e){return this.append(new P(t,e),!0)},t.prototype.lineTo=function(t,e){return this.append(new A(t,e))},t.prototype.arcTo=function(t,e,i,n,r){return this.append(new k(t,e,i,n,r))},t.prototype.arc=function(t,e,i,n,r,s){return this.append(new O(t,e,i,n,r,s))},t.prototype.quadraticCurveTo=function(t,e,i,n){return this.append(new R(t,e,i,n))},t.prototype.bezierCurveTo=function(t,e,i,n,r,s){return this.append(new F(t,e,i,n,r,s))},t.prototype.rect=function(t,e,i,n){return this.append(new B(t,e,i,n))},t.prototype.closePath=function(){return this._activeInstructions.length?this.append(new X):this},t.prototype.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},t.prototype.beginFill=function(t){return this._setFill(t?new N(t):null)},t.prototype.beginLinearGradientFill=function(t,e,i,n,r,s){return this._setFill((new N).linearGradient(t,e,i,n,r,s))},t.prototype.beginRadialGradientFill=function(t,e,i,n,r,s,o,a){return this._setFill((new N).radialGradient(t,e,i,n,r,s,o,a))},t.prototype.beginBitmapFill=function(t,e,i){return this._setFill(new N(null,i).bitmap(t,e))},t.prototype.endFill=function(){return this.beginFill()},t.prototype.setStrokeStyle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this._updateInstructions(!0),this._strokeStyle=this.command=new U(t,e,i,n,r),this._stroke&&(this._stroke.ignoreScale=r),this._strokeIgnoreScale=r,this},t.prototype.setStrokeDash=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._updateInstructions(!0),this._strokeDash=this.command=new H(t,e),this},t.prototype.beginStroke=function(t){return this._setStroke(t?new Y(t):null)},t.prototype.beginLinearGradientStroke=function(t,e,i,n,r,s){return this._setStroke((new Y).linearGradient(t,e,i,n,r,s))},t.prototype.beginRadialGradientStroke=function(t,e,i,n,r,s,o,a){return this._setStroke((new Y).radialGradient(t,e,i,n,r,s,o,a))},t.prototype.beginBitmapStroke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"repeat";return this._setStroke((new Y).bitmap(t,e))},t.prototype.endStroke=function(){return this.beginStroke()},t.prototype.drawRoundRect=function(t,e,i,n,r){return this.drawRoundRectComplex(t,e,i,n,r,r,r,r)},t.prototype.drawRoundRectComplex=function(t,e,i,n,r,s,o,a){return this.append(new j(t,e,i,n,r,s,o,a))},t.prototype.drawCircle=function(t,e,i){return this.append(new W(t,e,i))},t.prototype.drawEllipse=function(t,e,i,n){return this.append(new V(t,e,i,n))},t.prototype.drawPolyStar=function(t,e,i,n,r,s){return this.append(new z(t,e,i,n,r,s))},t.prototype.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},t.prototype.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],r=0,s=e.length,o=[],a=0,h=0,l=t.BASE_64;r<s;){var u=l[e.charAt(r)],c=u>>3,p=i[c];if(!p||3&u)throw"bad path data (@"+r+"):c";var d=n[c];c||(a=h=0),o.length=0,r++;for(var f=2+(u>>2&1),v=0;v<d;v++){var g=l[e.charAt(r)],_=g>>5?-1:1;g=(31&g)<<6|l[e.charAt(r+1)],3===f&&(g=g<<6|l[e.charAt(r+2)]),g=_*g/10,v%2?a=g+=a:h=g+=h,o[v]=g,r+=f}p.apply(this,o)}return this},t.prototype.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},t.prototype.unstore=function(){return this._storeIndex=0,this},t.prototype.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},t.prototype.toString=function(){return"["+this.constructor.name+"]"},t.prototype._updateInstructions=function(e){var i=this._instructions,n=this._activeInstructions,r=this._commitIndex;if(this._dirty&&n.length){i.length=r,i.push(t.beginCmd);var s=n.length,o=i.length;i.length=o+s;for(var a=0;a<s;a++)i[a+o]=n[a];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&i.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&i.push(this._strokeStyle),e&&(this._oldStrokeDash=this._strokeDash,this._oldStrokeStyle=this._strokeStyle),i.push(this._stroke)),this._dirty=!1}e&&(n.length=0,this._commitIndex=i.length)},t.prototype._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},t.prototype._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},r(t,[{key:"instructions",get:function(){return this._updateInstructions(),this._instructions}}]),t}(),A=function(){function t(e,i){n(this,t),this.x=e,this.y=i}return t.prototype.exec=function(t){t.lineTo(this.x,this.y)},t}(),P=function(){function t(e,i){n(this,t),this.x=e,this.y=i}return t.prototype.exec=function(t){t.moveTo(this.x,this.y)},t}(),k=function(){function t(e,i,r,s,o){n(this,t),this.x1=e,this.y1=i,this.x2=r,this.y2=s,this.radius=o}return t.prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},t}(),O=function(){function t(e,i,r,s,o,a){n(this,t),this.x=e,this.y=i,this.radius=r,this.startAngle=s,this.endAngle=o,this.anticlockwise=!!a}return t.prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},t}(),R=function(){function t(e,i,r,s){n(this,t),this.cpx=e,this.cpy=i,this.x=r,this.y=s}return t.prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},t}(),F=function(){function t(e,i,r,s,o,a){n(this,t),this.cp1x=e,this.cp1y=i,this.cp2x=r,this.cp2y=s,this.x=o,this.y=a}return t.prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},t}(),B=function(){function t(e,i,r,s){n(this,t),this.x=e,this.y=i,this.w=r,this.h=s}return t.prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},t}(),X=function(){function t(){n(this,t)}return t.prototype.exec=function(t){t.closePath()},t}(),G=function(){function t(){n(this,t)}return t.prototype.exec=function(t){t.beginPath()},t}(),N=function(){function t(e,i){n(this,t),this.style=e,this.matrix=i,this.path=!1}return t.prototype.exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},t.prototype.linearGradient=function(t,e,i,n,r,s){for(var o=this.style=I._ctx.createLinearGradient(i,n,r,s),a=t.length,h=0;h<a;h++)o.addColorStop(e[h],t[h]);return o.props={colors:t,ratios:e,x0:i,y0:n,x1:r,y1:s,type:"linear"},this},t.prototype.radialGradient=function(t,e,i,n,r,s,o,a){for(var h=this.style=I._ctx.createRadialGradient(i,n,r,s,o,a),l=t.length,u=0;u<l;u++)h.addColorStop(e[u],t[u]);return h.props={colors:t,ratios:e,x0:i,y0:n,r0:r,x1:s,y1:o,r1:a,type:"radial"},this},t.prototype.bitmap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(t.naturalWidth||t.getContext||t.readyState>=2)&&((this.style=I._ctx.createPattern(t,e)).props={image:t,repetition:e,type:"bitmap"});return this},t}(),Y=function(){function t(e,i){n(this,t),this.style=e,this.ignoreScale=i,this.path=!1}return t.prototype.exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},t.prototype.linearGradient=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];N.prototype.linearGradient.apply(this,e)},t.prototype.radialGradient=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];N.prototype.radialGradient.apply(this,e)},t.prototype.bitmap=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];N.prototype.bitmap.apply(this,e)},t}(),U=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"butt",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"miter",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,t),this.width=e,this.caps=i,this.joints=r,this.miterLimit=s,this.ignoreScale=o,this.path=!1}return t.prototype.exec=function(t){t.lineWidth=this.width,t.lineCap=isNaN(this.caps)?this.caps:I.STROKE_CAPS_MAP[this.caps],t.lineJoin=isNaN(this.joints)?this.joints:I.STROKE_JOINTS_MAP[this.joints],t.miterLimit=this.miterLimit,t.ignoreScale=this.ignoreScale},t}(),H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.EMPTY_SEGMENTS,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.segments=e,this.offset=i}return t.prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments),t.lineDashOffset=this.offset)},r(t,null,[{key:"EMPTY_SEGMENTS",get:function(){return _EMPTY_SEGMENTS}}]),t}(),j=function(){function t(e,i,r,s,o,a,h,l){n(this,t),this.x=e,this.y=i,this.w=r,this.h=s,this.radiusTL=o,this.radiusTR=a,this.radiusBR=h,this.radiusBL=l}return t.prototype.exec=function(t){var e=(h<l?h:l)/2,i=0,n=0,r=0,s=0,o=this.x,a=this.y,h=this.w,l=this.h,u=this.radiusTL,c=this.radiusTR,p=this.radiusBR,d=this.radiusBL;u<0&&(u*=i=-1),u>e&&(u=e),c<0&&(c*=n=-1),c>e&&(c=e),p<0&&(p*=r=-1),p>e&&(p=e),d<0&&(d*=s=-1),d>e&&(d=e),t.moveTo(o+h-c,a),t.arcTo(o+h+c*n,a-c*n,o+h,a+c,c),t.lineTo(o+h,a+l-p),t.arcTo(o+h+p*r,a+l+p*r,o+h-p,a+l,p),t.lineTo(o+d,a+l),t.arcTo(o-d*s,a+l+d*s,o,a+l-d,d),t.lineTo(o,a+u),t.arcTo(o-u*i,a-u*i,o+u,a,u),t.closePath()},t}(),W=function(){function t(e,i,r){n(this,t),this.x=e,this.y=i,this.radius=r}return t.prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},t}(),V=function(){function t(e,i,r,s){n(this,t),this.x=e,this.y=i,this.w=r,this.h=s}return t.prototype.exec=function(t){var e=this.x,i=this.y,n=this.w,r=this.h,s=.5522848,o=n/2*s,a=r/2*s,h=e+n,l=i+r,u=e+n/2,c=i+r/2;t.moveTo(e,c),t.bezierCurveTo(e,c-a,u-o,i,u,i),t.bezierCurveTo(u+o,i,h,c-a,h,c),t.bezierCurveTo(h,c+a,u+o,l,u,l),t.bezierCurveTo(u-o,l,e,c+a,e,c)},t}(),z=function(){function t(e,i,r,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.x=e,this.y=i,this.radius=r,this.sides=s,this.pointSize=o,this.angle=a}return t.prototype.exec=function(t){var e=this.x,i=this.y,n=this.radius,r=this.angle/180*Math.PI,s=this.sides,o=1-this.pointSize,a=Math.PI/s;t.moveTo(e+Math.cos(r)*n,i+Math.sin(r)*n);for(var h=0;h<s;h++)r+=a,1!=o&&t.lineTo(e+Math.cos(r)*n*o,i+Math.sin(r)*n*o),r+=a,t.lineTo(e+Math.cos(r)*n,i+Math.sin(r)*n);t.closePath()},t}(),q=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");q.getContext&&(I._ctx=q.getContext("2d"),q.width=q.height=1),I.beginCmd=new G,I.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},I.STROKE_CAPS_MAP=["butt","round","square"],I.STROKE_JOINTS_MAP=["miter","round","bevel"],I.EMPTY_SEGMENTS=[];var J=function(t){function e(r){var s=r.mode,a=void 0===s?e.INDEPENDENT:s,h=r.startPosition,l=void 0===h?0:h,u=r.loop,c=void 0===u?-1:u,p=r.paused,d=void 0!==p&&p,f=r.frameBounds,v=void 0===f?null:f,g=r.labels,_=void 0===g?null:g;n(this,e);var m=o(this,t.call(this));return!e.inited&&e.init(),m.mode=a,m.startPosition=l,m.loop=!0===c?-1:c||0,m.currentFrame=0,m.timeline=new i({useTicks:!0,paused:!0,mode:a,startPosition:l,loop:c,frameBounds:v,labels:_}),m.paused=d,m.actionsEnabled=!0,m.autoReset=!0,m.frameBounds=m.frameBounds||props.frameBounds,m.framerate=null,m._synchOffset=0,m._rawPosition=-1,m._t=0,m._managed={},m._bound_resolveState=m._resolveState.bind(m),m}return s(e,t),e.init=function(){e.inited||(Q.install(),e.inited=!0)},e.prototype.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.prototype.draw=function(e,i){return!!this.drawCache(e,i)||(this._updateState(),t.prototype.draw.call(this,e,i),!0)},e.prototype.play=function(){this.paused=!1},e.prototype.stop=function(){this.paused=!0},e.prototype.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.prototype.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.prototype.advance=function(t){var i=e.INDEPENDENT;if(this.mode===i){for(var n=this,r=n.framerate;(n=n.parent)&&null===r;)n.mode===i&&(r=n._framerate);if(this._framerate=r,!this.paused){var s=null!==r&&-1!==r&&null!==t?t/(1e3/r)+this._t:1,o=0|s;for(this._t=s-o;o--;)this._updateTimeline(this._rawPosition+1,!1)}}},e.prototype.clone=function(){throw"MovieClip cannot be cloned."},e.prototype._updateState=function(){-1!==this._rawPosition&&this.mode===e.INDEPENDENT||this._updateTimeline(-1)},e.prototype._tick=function(e){this.advance(e&&e.delta),t.prototype._tick.call(this,e)},e.prototype._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(this._t=0,this._updateTimeline(e,!0))},e.prototype._reset=function(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1},e.prototype._updateTimeline=function(t,i){var n=this.mode!==e.INDEPENDENT,r=this.timeline;n&&(t=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset)),t<1&&(t=0),(this._rawPosition!==t||n)&&(this._rawPosition=t,r.loop=this.loop,r.setPosition(t,n||!this.actionsEnabled,i,this._bound_resolveState))},e.prototype._renderFirstFrame=function(){var t=this.timeline,e=t.rawPosition;t.setPosition(0,!0,!0,this._bound_resolveState),t.rawPosition=e},e.prototype._resolveState=function(){var t=this.timeline;for(var e in this.currentFrame=t.position,this._managed)this._managed[e]=1;var i=t.tweens,n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var o=s,a=o.target;if(a!==this&&!o.passive){var h=o._stepPosition;a instanceof m?this._addManagedChild(a,h):this._setState(a.state,h)}}for(var l=this.children,u=l.length-1;u>=0;u--){var c=l[u].id;1===this._managed[c]&&(this.removeChildAt(u),delete this._managed[c])}},e.prototype._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i],r=n.t,s=n.p;for(var o in s)r[o]=s[o];this._addManagedChild(r,e)}},e.prototype._addManagedChild=function(t,i){t._off||(this.addChildAt(t,0),t instanceof e&&(t._synchOffset=i,t.mode===e.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},e.prototype._getBounds=function(e,i){var n=this.getBounds();return!n&&this.frameBounds&&(n=this._rectangle.copy(this.frameBounds[this.currentFrame])),n?this._transformBounds(n,e,i):t.prototype._getBounds.call(this,e,i)},r(e,[{key:"labels",get:function(){return this.timeline.labels}},{key:"currentLabel",get:function(){return this.timeline.getCurrentLabel()}},{key:"duration",get:function(){return this.timeline.duration}},{key:"totalFrames",get:function(){return this.duration}}]),e}(w);J.INDEPENDENT="independent",J.SINGLE_FRAME="single",J.SYNCHED="synched",J.inited=!1;var Q=function(){function t(){throw n(this,t),"MovieClipPlugin cannot be instantiated."}return t.install=function(){e.installPlugin(t)},t.init=function(t,e,i){return i},t.tween=function(t,e,i,n,r,s,o,a){return t.target instanceof J?1===s?r[e]:n[e]:i},t}();Q.priority=100;var K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"black",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.color=e,this.offsetX=i,this.offsetY=r,this.blur=s}return t.prototype.toString=function(){return"["+this.constructor.name+"]"},t.prototype.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},t}();K.identity=new K("transparent");var Z=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new I;n(this,e);var r=o(this,t.call(this));return r.graphics=i,r}return s(e,t),e.prototype.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.prototype.draw=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!t.prototype.draw.call(this,e,i)||(this.graphics.draw(e,this),!0)},e.prototype.clone=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new e(t))},e}(m),$=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.complete=!0,r.framerate=0,r._animations=null,r._frames=null,r._images=null,r._data=null,r._loadCount=0,r._frameHeight=0,r._frameWidth=0,r._numFrames=0,r._regX=0,r._regY=0,r._spacing=0,r._margin=0,r._parseData(i),r}return s(e,t),e.prototype.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.prototype.getAnimation=function(t){return this._data[t]},e.prototype.getFrame=function(t){var e=void 0;return this._frames&&(e=this._frames[t])?e:null},e.prototype.getFrameBounds=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v,i=this.getFrame(t);return i?e.setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.prototype.toString=function(){return"["+this.constructor.name+"]"},e.prototype.clone=function(){throw"SpriteSheet cannot be cloned."},e.prototype._parseData=function(t){var e=this;if(null!=t){if(this.framerate=t.framerate||0,t.images){var i=function(t){var i=e._images=[],n=void 0;"string"==typeof t&&(n=t,(t=document.createElement("img")).src=n),i.push(t),t.getContext||t.naturalWidth||(e._loadCount++,e.complete=!1,t.onload=function(){return e._handleImageLoad(n)},t.onerror=function(){return e._handleImageError(n)}),a=t},n=t.images,r=Array.isArray(n),s=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}var a=o;i(a)}}if(null!=t.frames)if(Array.isArray(t.frames)){this._frames=[];var h=t.frames,l=Array.isArray(h),u=0;for(h=l?h:h[Symbol.iterator]();;){var c;if(l){if(u>=h.length)break;c=h[u++]}else{if((u=h.next()).done)break;c=u.value}var p=c;this._frames.push({image:this._images[p[4]?p[4]:0],rect:new v(p[0],p[1],p[2],p[3]),regX:p[5]||0,regY:p[6]||0})}}else{var d=t.frames;this._frameWidth=d.width,this._frameHeight=d.height,this._regX=d.regX||0,this._regY=d.regY||0,this._spacing=d.spacing||0,this._margin=d.margin||0,this._numFrames=d.count,0===this._loadCount&&this._calculateFrames()}if(this._animations=[],null!=t.animations){this._data={};var f=t.animations;for(var g in f){var _={name:g},m=f[g],y=void 0;if("number"==typeof m)y=_.frames=[m];else if(Array.isArray(m))if(1===m.length)_.frames=[m[0]];else{_.speed=m[3],_.next=m[2],y=_.frames=[];for(var w=m[0];w<=m[1];w++)y.push(w)}else{_.speed=m.speed,_.next=m.next;var x=m.frames;y=_.frames="number"==typeof x?[x]:x.slice(0)}!0!==_.next&&void 0!==_.next||(_.next=g),(!1===_.next||y.length<2&&_.next===g)&&(_.next=null),_.speed||(_.speed=1),this._animations.push(g),this._data[g]=_}}}},e.prototype._handleImageLoad=function(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e.prototype._handleImageError=function(t){var e=new h("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")},e.prototype._calculateFrames=function(){if(!this._frames&&0!==this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,n=this._frameHeight,r=this._spacing,s=this._margin;t:for(var o=0,a=this._images,h=a.length;o<h;o++)for(var l=a[o],u=l.width||l.naturalWidth,c=l.height||l.naturalHeight,p=s;p<=c-s-n;){for(var d=s;d<=u-s-i;){if(e>=t)break t;e++,this._frames.push({image:l,rect:new v(d,p,i,n),regX:this._regX,regY:this._regY}),d+=i+r}p+=n+r}this._numFrames=e}},r(e,[{key:"animations",get:function(){return this._animations.slice()}}]),e}(l),tt={start:0,left:0,center:-.5,end:-1,right:-1},et={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},it=function(t){function e(i,r,s){n(this,e);var a=o(this,t.call(this));return a.text=i,a.font=r,a.color=s,a.textAlign="left",a.textBaseline="top",a.maxWidth=null,a.outline=0,a.lineHeight=0,a.lineWidth=null,a}return s(e,t),e.prototype.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.prototype.draw=function(e,i){if(t.prototype.draw.call(this,e,i))return!0;var n=this.color||"#000";return this.outline?(e.strokeStyle=n,e.lineWidth=1*this.outline):e.fillStyle=n,this._drawText(this._prepContext(e)),!0},e.prototype.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.prototype.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.prototype.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.prototype.getBounds=function(){var i=t.prototype.getBounds.call(this);if(i)return i;if(null==this.text||""===this.text)return null;var n=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,s=r*e.H_OFFSETS[this.textAlign||"left"],o=(this.lineHeight||this.getMeasuredLineHeight())*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(s,o,r,n.height)},e.prototype.getMetrics=function(){var t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)},e.prototype.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},e.prototype.toString=function(){return"["+this.constructor.name+" (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e.prototype._cloneProps=function(e){return t.prototype._cloneProps.call(this,e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth,e},e.prototype._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t.lineJoin="miter",t.miterLimit=2.5,t},e.prototype._drawText=function(t,i,n){var r=!!t;r||((t=e._workingContext).save(),this._prepContext(t));var s=this.lineHeight||this.getMeasuredLineHeight(),o=0,a=0,h=String(this.text).split(/(?:\r\n|\r|\n)/),l=Array.isArray(h),u=0;for(h=l?h:h[Symbol.iterator]();;){var c;if(l){if(u>=h.length)break;c=h[u++]}else{if((u=h.next()).done)break;c=u.value}var p=c,d=null;if(null!=this.lineWidth&&(d=t.measureText(p).width)>this.lineWidth){var f=p.split(/(\s)/);p=f[0],d=t.measureText(p).width;for(var v=f.length,g=1;g<v;g+=2){var _=t.measureText(f[g]+f[g+1]).width;d+_>this.lineWidth?(r&&this._drawTextLine(t,p,a*s),n&&n.push(p),d>o&&(o=d),p=f[g+1],d=t.measureText(p).width,a++):(p+=f[g]+f[g+1],d+=_)}}r&&this._drawTextLine(t,p,a*s),n&&n.push(p),i&&null==d&&(d=t.measureText(p).width),d>o&&(o=d),a++}return i&&(i.width=o,i.height=a*s),r||t.restore(),i},e.prototype._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},e.prototype._getMeasuredWidth=function(t){var i=e._workingContext;i.save();var n=this._prepContext(i).measureText(t).width;return i.restore(),n},r(e,null,[{key:"H_OFFSETS",get:function(){return tt}},{key:"V_OFFSETS",get:function(){return et}}]),e}(m),nt=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");nt.getContext&&(it._workingContext=nt.getContext("2d"),nt.width=nt.height=1);var rt=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.alphaMap=i,r._alphaMap=null,r._mapData=null,r._mapTexture=null,r.FRAG_SHADER_BODY="\n\t\t\tuniform sampler2D uAlphaSampler;\n\n\t\t\tvoid main (void) {\n\t\t\t\tvec4 color = texture2D(uSampler, vRenderCoord);\n\t\t\t\tvec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);\n\n\t\t\t\t// some image formats can have transparent white rgba(1,1,1, 0) when put on the GPU, this means we need a slight tweak\n\t\t\t\t// using ceil ensure that the colour will be used so long as it exists but pure transparency will be treated black\n\t\t\t\tgl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));\n\t\t\t}\n\t\t",r}return s(e,t),e.prototype.shaderParamSetup=function(t,e,i){this._mapTexture||(this._mapTexture=t.createTexture()),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._mapTexture),e.setTextureParams(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.alphaMap),t.uniform1i(t.getUniformLocation(i,"uAlphaSampler"),1)},e.prototype.clone=function(){var t=new e(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},e.prototype._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,n=e.length,r=0;r<n;r+=4)e[r+3]=i[r]||0;return!0},e.prototype._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap===this._alphaMap&&this._mapData)return!0;this._mapData=null;var t=this._alphaMap=this.alphaMap,e=t,i=void 0;t instanceof HTMLCanvasElement?i=e.getContext("2d"):((e=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).width=t.width,e.height=t.height,(i=e.getContext("2d")).drawImage(t,0,0));try{return this._mapData=i.getImageData(0,0,t.width,t.height).data,!0}catch(t){return!1}},e}(g),st=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.mask=i,r.usesContext=!0,r.FRAG_SHADER_BODY="\n\t\t\tuniform sampler2D uAlphaSampler;\n\n\t\t\tvoid main (void) {\n\t\t\t\tvec4 color = texture2D(uSampler, vRenderCoord);\n\t\t\t\tvec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);\n\n\t\t\t\tgl_FragColor = vec4(color.rgb, color.a * alphaMap.a);\n\t\t\t}\n\t\t",r}return s(e,t),e.prototype.applyFilter=function(t,e,i,n,r,s,o,a){return!this.mask||(s=s||t,null==o&&(o=e),null==a&&(a=i),s.save(),t==s&&(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,a),s.restore(),!0))},e.prototype.clone=function(){return new e(this.mask)},e.prototype.shaderParamSetup=function(t,e,i){this._mapTexture||(this._mapTexture=t.createTexture()),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._mapTexture),e.setTextureParams(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.mask),t.uniform1i(t.getUniformLocation(i,"uAlphaSampler"),1)},e}(g),ot=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],at=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],ht=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n(this,e);var a=o(this,t.call(this));return a._blurX=i,a._blurXTable=[],a._lastBlurX=null,a._blurY=r,a._blurYTable=[],a._lastBlurY=null,a._quality=isNaN(s)||s<1?1:s,a._lastQuality=null,a.quality=0|a._quality,a.FRAG_SHADER_TEMPLATE="\n\t\t\tuniform float xWeight[{{blurX}}];\n\t\t\tuniform float yWeight[{{blurY}}];\n\t\t\tuniform vec2 textureOffset;\n\t\t\tvoid main (void) {\n\t\t\t\tvec4 color = vec4(0.0);\n\n\t\t\t\tfloat xAdj = ({{blurX}}.0-1.0)/2.0;\n\t\t\t\tfloat yAdj = ({{blurY}}.0-1.0)/2.0;\n\t\t\t\tvec2 sampleOffset;\n\n\t\t\t\tfor(int i=0; i<{{blurX}}; i++) {\n\t\t\t\t\tfor(int j=0; j<{{blurY}}; j++) {\n\t\t\t\t\t\tsampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));\n\t\t\t\t\t\tcolor += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = color.rgba;\n\t\t\t}\n\t\t",a}return s(e,t),e.prototype.shaderParamSetup=function(t,e,i){t.uniform1fv(t.getUniformLocation(i,"xWeight"),this._blurXTable),t.uniform1fv(t.getUniformLocation(i,"yWeight"),this._blurYTable),t.uniform2f(t.getUniformLocation(i,"textureOffset"),2/(e._viewportWidth*this._quality),2/(e._viewportHeight*this._quality))},e.prototype.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(e<=0&&i<=0)return t;var n=Math.pow(this.quality,.2);return(t||new v).pad(i*n+1,e*n+1,i*n+1,e*n+1)},e.prototype.clone=function(){return new e(this.blurX,this.blurY,this.quality)},e.prototype._updateShader=function(){var t=this.FRAG_SHADER_TEMPLATE;t=(t=t.replace(/{{blurX}}/g,this._blurXTable.length.toFixed(0))).replace(/{{blurY}}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=t},e.prototype._getTable=function(t){if(t<=1)return[1];for(var e=[],i=Math.ceil(2*t),n=(i+=i%2?0:1)/2|0,r=-n;r<=n;r++){var s=r/n*4.2;e.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-Math.pow(s,2)/4))}var o=e.reduce(function(t,e){return t+e},0);return e.map(function(t){return t/o})},e.prototype._applyFilter=function(t){var i=this._blurX>>1;if(isNaN(i)||i<0)return!1;var n=this._blurY>>1;if(isNaN(n)||n<0)return!1;if(0===i&&0===n)return!1;var r=this.quality;(isNaN(r)||r<1)&&(r=1),(r|=0)>3&&(r=3),r<1&&(r=1);var s=t.data,o=0,a=0,h=0,l=0,u=0,c=0,p=0,d=0,f=0,v=0,g=0,_=0,m=0,y=0,w=0,x=i+i+1|0,b=n+n+1|0,E=0|t.width,S=0|t.height,T=E-1|0,C=S-1|0,M=i+1|0,D=n+1|0,L={r:0,b:0,g:0,a:0},I=L;for(h=1;h<x;h++)I=I.n={r:0,b:0,g:0,a:0};I.n=L;var A={r:0,b:0,g:0,a:0},P=A;for(h=1;h<b;h++)P=P.n={r:0,b:0,g:0,a:0};P.n=A;for(var k=null,O=0|e.MUL_TABLE[i],R=0|e.SHG_TABLE[i],F=0|e.MUL_TABLE[n],B=0|e.SHG_TABLE[n];r-- >0;){p=c=0;var X=O,G=R;for(a=S;--a>-1;){for(d=M*(_=s[0|c]),f=M*(m=s[c+1|0]),v=M*(y=s[c+2|0]),g=M*(w=s[c+3|0]),I=L,h=M;--h>-1;)I.r=_,I.g=m,I.b=y,I.a=w,I=I.n;for(h=1;h<M;h++)l=c+((T<h?T:h)<<2)|0,d+=I.r=s[l],f+=I.g=s[l+1],v+=I.b=s[l+2],g+=I.a=s[l+3],I=I.n;for(k=L,o=0;o<E;o++)s[c++]=d*X>>>G,s[c++]=f*X>>>G,s[c++]=v*X>>>G,s[c++]=g*X>>>G,l=p+((l=o+i+1)<T?l:T)<<2,d-=k.r-(k.r=s[l]),f-=k.g-(k.g=s[l+1]),v-=k.b-(k.b=s[l+2]),g-=k.a-(k.a=s[l+3]),k=k.n;p+=E}for(X=F,G=B,o=0;o<E;o++){for(d=D*(_=s[c=o<<2|0])|0,f=D*(m=s[c+1|0])|0,v=D*(y=s[c+2|0])|0,g=D*(w=s[c+3|0])|0,P=A,h=0;h<D;h++)P.r=_,P.g=m,P.b=y,P.a=w,P=P.n;for(u=E,h=1;h<=n;h++)c=u+o<<2,d+=P.r=s[c],f+=P.g=s[c+1],v+=P.b=s[c+2],g+=P.a=s[c+3],P=P.n,h<C&&(u+=E);if(c=o,k=A,r>0)for(a=0;a<S;a++)s[(l=c<<2)+3]=w=g*X>>>G,w>0?(s[l]=d*X>>>G,s[l+1]=f*X>>>G,s[l+2]=v*X>>>G):s[l]=s[l+1]=s[l+2]=0,l=o+((l=a+D)<C?l:C)*E<<2,d-=k.r-(k.r=s[l]),f-=k.g-(k.g=s[l+1]),v-=k.b-(k.b=s[l+2]),g-=k.a-(k.a=s[l+3]),k=k.n,c+=E;else for(a=0;a<S;a++)s[(l=c<<2)+3]=w=g*X>>>G,w>0?(w=255/w,s[l]=(d*X>>>G)*w,s[l+1]=(f*X>>>G)*w,s[l+2]=(v*X>>>G)*w):s[l]=s[l+1]=s[l+2]=0,l=o+((l=a+D)<C?l:C)*E<<2,d-=k.r-(k.r=s[l]),f-=k.g-(k.g=s[l+1]),v-=k.b-(k.b=s[l+2]),g-=k.a-(k.a=s[l+3]),k=k.n,c+=E}}return!0},r(e,[{key:"blurX",get:function(){return this._blurX},set:function(t){(isNaN(t)||t<0)&&(t=0),this._blurX=t}},{key:"blurY",get:function(){return this._blurY},set:function(t){(isNaN(t)||t<0)&&(t=0),this._blurY=t}},{key:"quality",get:function(){return this._quality},set:function(t){(isNaN(t)||t<0)&&(t=0),this._quality=0|t}},{key:"_buildShader",get:function(){var t=this._lastBlurX!==this._blurX,e=this._lastBlurY!==this._blurY,i=this._lastQuality!==this._quality;return t||e||i?((t||i)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(e||i)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,void(this._lastQuality=this._quality)):this._compiledShader}},{key:"_builtShader",set:function(t){this._compiledShader}}],[{key:"MUL_TABLE",get:function(){return ot}},{key:"SHG_TABLE",get:function(){return at}}]),e}(g),lt=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;n(this,e);var p=o(this,t.call(this));return p.redMultiplier=i,p.greenMultiplier=r,p.blueMultiplier=s,p.alphaMultiplier=a,p.redOffset=h,p.greenOffset=l,p.blueOffset=u,p.alphaOffset=c,p.FRAG_SHADER_BODY="\n\t\t\tuniform vec4 uColorMultiplier;\n\t\t\tuniform vec4 uColorOffset;\n\n\t\t\tvoid main (void) {\n\t\t\t\tvec4 color = texture2D(uSampler, vRenderCoord);\n\n\t\t\t\tgl_FragColor = (color * uColorMultiplier) + uColorOffset;\n\t\t\t}\n\t\t",p}return s(e,t),e.prototype.shaderParamSetup=function(t,e,i){t.uniform4f(t.getUniformLocation(i,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier),t.uniform4f(t.getUniformLocation(i,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)},e.prototype.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e.prototype._applyFilter=function(t){for(var e=t.data,i=e.length,n=0;n<i;n+=4)e[n]=e[n]*this.redMultiplier+this.redOffset,e[n+1]=e[n+1]*this.greenMultiplier+this.greenOffset,e[n+2]=e[n+2]*this.blueMultiplier+this.blueOffset,e[n+3]=e[n+3]*this.alphaMultiplier+this.alphaOffset;return!0},e}(g),ut=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],ct=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],pt=function(){function t(e,i,r,s){n(this,t),this.setColor(e,i,r,s)}return t.prototype.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},t.prototype.reset=function(){return this.copy(t.IDENTITY_MATRIX)},t.prototype.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.prototype.adjustBrightness=function(t){return 0===t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},t.prototype.adjustContrast=function(e){if(0===e||isNaN(e))return this;var i=void 0;return i=(e=this._cleanValue(e,100))<0?127+e/100*127:127*(i=0===(i=e%1)?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[1+(e<<0)]*i)+127,this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustSaturation=function(t){if(0===t||isNaN(t))return this;var e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-e)+e,.6094*(1-e),.082*(1-e),0,0,.3086*(1-e),.6094*(1-e)+e,.082*(1-e),0,0,.3086*(1-e),.6094*(1-e),.082*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustHue=function(t){if(0===t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t);return this._multiplyMatrix([.213+.787*e+-.213*i,.715+-.715*e+-.715*i,.072+-.072*e+.928*i,0,0,.213+-.213*e+.143*i,.715+e*(1-.715)+.14*i,.072+-.072*e+-.283*i,0,0,.213+-.213*e+-.787*i,.715+-.715*e+.715*i,.072+.928*e+.072*i,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.concat=function(e){return(e=this._fixMatrix(e)).length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.toArray=function(){for(var e=[],i=t.LENGTH,n=0;n<i;n++)e[n]=this[n];return e},t.prototype.copy=function(e){for(var i=t.LENGTH,n=0;n<i;n++)this[n]=e[n];return this},t.prototype.toString=function(){return"["+this.constructor.name+"]"},t.prototype._multiplyMatrix=function(t){for(var e=[],i=0;i<5;i++){for(var n=0;n<5;n++)e[n]=this[n+5*i];for(var r=0;r<5;r++){for(var s=0,o=0;o<5;o++)s+=t[r+5*o]*e[o];this[r+5*i]=s}}},t.prototype._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t.prototype._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},r(t,null,[{key:"DELTA_INDEX",get:function(){return ut}},{key:"IDENTITY_MATRIX",get:function(){return ct}},{key:"LENGTH",get:function(){return 25}}]),t}(),dt=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r.matrix=i,r.FRAG_SHADER_BODY="\n\t\t\tuniform mat4 uColorMatrix;\n\t\t\tuniform vec4 uColorMatrixOffset;\n\n\t\t\tvoid main (void) {\n\t\t\t\tvec4 color = texture2D(uSampler, vRenderCoord);\n\n\t\t\t\tmat4 m = uColorMatrix;\n\t\t\t\tvec4 newColor = vec4(0,0,0,0);\n\t\t\t\tnewColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];\n\t\t\t\tnewColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];\n\t\t\t\tnewColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];\n\t\t\t\tnewColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];\n\n\t\t\t\tgl_FragColor = newColor + uColorMatrixOffset;\n\t\t\t}\n\t\t",r}return s(e,t),e.prototype.shaderParamSetup=function(t,e,i){var n=this.matrix,r=new Float32Array([n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]]);t.uniformMatrix4fv(t.getUniformLocation(i,"uColorMatrix"),!1,r),t.uniform4f(t.getUniformLocation(i,"uColorMatrixOffset"),n[4]/255,n[9]/255,n[14]/255,n[19]/255)},e.prototype.clone=function(){return new e(this.matrix)},e.prototype._applyFilter=function(t){for(var e=t.data,i=e.length,n=void 0,r=void 0,s=void 0,o=void 0,a=this.matrix,h=a[0],l=a[1],u=a[2],c=a[3],p=a[4],d=a[5],f=a[6],v=a[7],g=a[8],_=a[9],m=a[10],y=a[11],w=a[12],x=a[13],b=a[14],E=a[15],S=a[16],T=a[17],C=a[18],M=a[19],D=0;D<i;D+=4)n=e[D],r=e[D+1],s=e[D+2],o=e[D+3],e[D]=n*h+r*l+s*u+o*c+p,e[D+1]=n*d+r*f+s*v+o*g+_,e[D+2]=n*m+r*y+s*w+o*x+b,e[D+3]=n*E+r*S+s*T+o*C+M;return!0},e}(g),ft=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"out",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"over",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"down",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments[5],h=arguments[6];n(this,t),e.addEventListener&&(this.target=e,this.overLabel=r,this.outLabel=i,this.downLabel=null==s,this.play=o,this._isPressed=!1,this._isOver=!1,this._enabled=!1,e.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),a&&(h&&(a.actionsEnabled=!1,a.gotoAndStop&&a.gotoAndStop(h)),e.hitArea=a))}return t.prototype.toString=function(){return"["+this.constructor.name+"]"},t.prototype.handleEvent=function(t){var e=void 0,i=this.target,n=t.type;"mousedown"===n?(this._isPressed=!0,e=this.downLabel):"pressup"===n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"===n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},t.prototype._reset=function(){var t=this.paused;this.__reset(),this.paused=t},r(t,[{key:"enabled",get:function(){return this._enabled},set:function(t){if(t!==this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}}}]),t}(),vt=function(){function t(){throw n(this,t),"Touch cannot be instantiated"}return t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!(e&&e.canvas&&t.isSupported())&&(!!e.__touch||(e.__touch={pointers:{},multitouch:!i,preventDefault:!n,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0))},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){return t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",n,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.changedTouches,n=e.type,r=(i.length,i),s=Array.isArray(r),o=0;for(r=s?r:r[Symbol.iterator]();;){var a;if(s){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}var h=a,l=h.identifier;h.target==t.canvas&&("touchstart"===n?this._handleStart(t,l,e,h.pageX,h.pageY):"touchmove"===n?this._handleMove(t,l,e,h.pageX,h.pageY):"touchend"!==n&&"touchcancel"!==n||this._handleEnd(t,l,e))}}},t._IE_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){return t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",n,!1),window.addEventListener("MSPointerMove",n,!1),window.addEventListener("MSPointerUp",n,!1),window.addEventListener("MSPointerCancel",n,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",n,!1),window.addEventListener("pointermove",n,!1),window.addEventListener("pointerup",n,!1),window.addEventListener("pointercancel",n,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,n=e.pointerId,r=t.__touch.activeIDs;if("MSPointerDown"===i||"pointerdown"===i){if(e.srcElement!=t.canvas)return;r[n]=!0,this._handleStart(t,n,e,e.pageX,e.pageY)}else r[n]&&("MSPointerMove"===i||"pointermove"===i?this._handleMove(t,n,e,e.pageX,e.pageY):"MSPointerUp"!==i&&"MSPointerCancel"!==i&&"pointerup"!==i&&"pointercancel"!==i||(delete r[n],this._handleEnd(t,n,e)))}},t._handleStart=function(t,e,i,n,r){var s=t.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[e]||(o[e]=!0,s.count++,t._handlePointerDown(e,i,n,r))}},t._handleMove=function(t,e,i,n,r){t.__touch.pointers[e]&&t._handlePointerMove(e,i,n,r)},t._handleEnd=function(t,e,i){var n=t.__touch,r=n.pointers;r[e]&&(n.count--,t._handlePointerUp(e,i,!0),delete r[e])},t}(),gt=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n(this,e);var r=o(this,t.call(this));return r.maxWidth=2048,r.maxHeight=2048,r.spriteSheet=null,r.scale=1,r.padding=1,r.timeSlice=.3,r.progress=-1,r.framerate=i,r._frames=[],r._animations={},r._data=null,r._nextFrameIndex=0,r._index=0,r._timerID=null,r._scale=1,r}return s(e,t),e.prototype.addFrame=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments[3],s=arguments[4];if(this._data)throw e.ERR_RUNNING;var o=i||t.bounds||t.nominalBounds||t.getBounds&&t.getBounds();return o?this._frames.push({source:t,sourceRect:o,scale:n,funct:r,data:s,index:this._frames.length,height:o.height*n})-1:null},e.prototype.addAnimation=function(t,i,n,r){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:i,next:n,speed:r}},e.prototype.addMovieClip=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments[3],s=arguments[4],o=arguments[5];if(this._data)throw e.ERR_RUNNING;var a=t.frameBounds,h=i||t.bounds||t.nominalBounds||t.getBounds&&t.getBounds();if(h||a){for(var l=this._frames.length,u=t.timeline.duration,c=0;c<u;c++){var p=a&&a[c]?a[c]:h;this.addFrame(t,p,n,this._setupMovieClipFrame,{i:c,f:r,d:s})}var d=t.timeline._labels,f=[];for(var v in d)f.push({index:d[v],label:v});if(f.length){f.sort(function(t,e){return t.index-e.index});for(var g=0,_=f.length;g<_;g++){for(var m=f[g].label,y=l+f[g].index,w=l+(g===_-1?u:f[g+1].index),x=[],b=y;b<w;b++)x.push(b);o&&!(m=o(m,t,y,w))||this.addAnimation(m,x,!0)}}}},e.prototype.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.prototype.buildAsync=function(t){var i=this;if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild(),this._timerID=setTimeout(function(){return i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.prototype.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.prototype.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.prototype.toString=function(){return"["+this.constructor.name+"]"},e.prototype._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,framerate:this.framerate,animations:this._animations};var n=this._frames.slice();if(n.sort(function(t,e){return t.height<=e.height?-1:1}),n[n.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var r=0,s=0,o=0;n.length;){var a=this._fillRow(n,r,o,i,t);if(a.w>s&&(s=a.w),r+=a.h,!a.h||!n.length){var h=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.width=this._getSize(s,this.maxWidth),h.height=this._getSize(r,this.maxHeight),this._data.images[o]=h,a.h||(s=r=0,o++)}}},e.prototype._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e.prototype._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e.prototype._fillRow=function(t,i,n,r,s){for(var o=this.maxWidth,a=this.maxHeight-(i+=s),h=s,l=0,u=t.length-1;u>=0;u--){var c=t[u],p=this._scale*c.scale,d=c.sourceRect,f=c.source,g=Math.floor(p*d.x-s),_=Math.floor(p*d.y-s),m=Math.ceil(p*d.height+2*s),y=Math.ceil(p*d.width+2*s);if(y>o)throw e.ERR_DIMENSIONS;m>a||h+y>o||(c.img=n,c.rect=new v(h,i,y,m),l=l||m,t.splice(u,1),r[c.index]=[h,i,y,m,n,Math.round(-g+p*f.regX-s),Math.round(-_+p*f.regY-s)],h+=y)}return{w:h,h:l}},e.prototype._endBuild=function(){this.spriteSheet=new $(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e.prototype._run=function(){for(var t=this,e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),i=(new Date).getTime()+e,n=!1;i>(new Date).getTime();)if(!this._drawNext()){n=!0;break}n?this._endBuild():this._timerID=setTimeout(function(){return t._run()},50-e);var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new h("progress");s.progress=r,this.dispatchEvent(s)}},e.prototype._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,n=t.sourceRect,r=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),r.save(),r.beginPath(),r.rect(i.x,i.y,i.width,i.height),r.clip(),r.translate(Math.ceil(i.x-n.x*e),Math.ceil(i.y-n.y*e)),r.scale(e,e),t.source.draw(r),r.restore(),++this._index<this._frames.length},r(e,null,[{key:"ERR_DIMENSIONS",get:function(){return"frame dimensions exceed max spritesheet dimensions"}},{key:"ERR_RUNNING",get:function(){return"a build is already running"}}]),e}(l),_t=function(){function t(){throw n(this,t),"SpriteSheetUtils cannot be instantiated"}return t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var n=e.getFrame(i);if(!n)return null;var r=n.rect,s=t._workingCanvas;s.width=r.width,s.height=r.height,t._workingContext.drawImage(n.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},t.mergeAlpha=function(t,e,i){i||(i=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},t._flip=function(e,i,n,r){for(var s=e._images,o=t._workingCanvas,a=t._workingContext,h=s.length/i,l=0;l<h;l++){var u=s[l];u.__tmp=l,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,o.width+1,o.height+1),o.width=u.width,o.height=u.height,a.setTransform(n?-1:1,0,0,r?-1:1,n?u.width:0,r?u.height:0),a.drawImage(u,0,0);var c=document.createElement("img");c.src=o.toDataURL("image/png"),c.width=u.width||u.naturalWidth,c.height=u.height||u.naturalHeight,s.push(c)}for(var p=e._frames,d=p.length/i,f=0;f<d;f++){var v=p[f],g=v.rect.clone(),_=s[v.image.__tmp+h*i],m={image:_,rect:g,regX:v.regX,regY:v.regY};n&&(g.x=(_.width||_.naturalWidth)-g.x-g.width,m.regX=g.width-v.regX),r&&(g.y=(_.height||_.naturalHeight)-g.y-g.height,m.regY=g.height-v.regY),p.push(m)}for(var y="_"+(n?"h":"")+(r?"v":""),w=e._animations,x=e._data,b=w.length/i,E=0;E<b;E++){var S=w[E],T=x[S],C={name:S+y,speed:T.speed,next:T.next,frames:[]};T.next&&(C.next+=y);for(var M=T.frames,D=0,L=M.length;D<L;D++)C.frames.push(M[D]+d*i);x[C.name]=C,w.push(C.name)}},t}(),mt=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");mt.getContext&&(_t._workingCanvas=mt,_t._workingContext=mt.getContext("2d"),mt.width=mt.height=1);var yt=null,wt=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r._stage=i,r}return s(e,t),e.dispProps=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="\tP: "+t.x.toFixed(2)+"x"+t.y.toFixed(2)+"\t",r="\tR: "+t.regX.toFixed(2)+"x"+t.regY.toFixed(2)+"\t";e._log(i,t.toString()+"\t",n,r)},e._log=function(){var t,i;e.alternateOutput?(t=e.alternateOutput).log.apply(t,arguments):(i=console).log.apply(i,arguments)},e.prototype.log=function(t){t||(t=this._stage),e._log("Batches Per Draw: "+(t._batchID/t._drawID).toFixed(4)),this.logContextInfo(t._webGLContext),this.logDepth(t.children,""),this.logTextureFill(t)},e.prototype.toggleGPUDraw=function(t,i){t||(t=this._stage),void 0===i&&(i=!!t._drawBuffers_),i&&t._drawBuffers_?(t._drawBuffers=t._drawBuffers_,t._drawBuffers_=void 0):(t._drawBuffers_=t._drawBuffers,t._drawBuffers=function(t){this.vocalDebug&&e._log("BlankDraw["+this._drawID+":"+this._batchID+"] : "+this.batchReason)})},e.prototype.logDepth=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._log;t||(t=this._stage.children);for(var r=t.length,s=0;s<r;s++){var o=t[s];n(i+"-",o),o.children&&o.children.length&&this.logDepth(o.children,"|"+i,n)}},e.prototype.logContextInfo=function(t){t||(t=this._stage._webGLContext);var i="\n\t\t\t== LOG:\n\n\t\t\tMax textures per draw: "+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)+"\n\n\t\t\tMax textures active: "+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)+"\n\n\t\t\t\n\n\t\t\tMax texture size: "+t.getParameter(t.MAX_TEXTURE_SIZE)/2+"\n\n\t\t\tMax cache size: "+t.getParameter(t.MAX_RENDERBUFFER_SIZE)/2+"\n\n\t\t\t\n\n\t\t\tMax attributes per vertex: "+t.getParameter(t.MAX_VERTEX_ATTRIBS)+"\n\n\t\t\tWebGL Version string: "+t.getParameter(t.VERSION)+"\n\n\t\t\t======\n\t\t";e._log(i)},e.prototype.logTextureFill=function(t){t||(t=this._stage);var i=t._textureDictionary,n=t._batchTextureCount;e._log(textureMax+": "+n);var r=[];for(var s in i){s.replace(window.location.origin,"");var o=i[s],a=!!o._lastActiveIndex&&o._lastActiveIndex===o._activeIndex;r.push({src:src,element:o,shifted:a}),o._lastActiveIndex=o._activeIndex}r.sort(function(e,i){return e.element._drawID===t._drawID?1:e.element._drawID<i.element._drawID?-1:0});for(var h=r.length,l=0;l<h;l++){var u=r[l],c=u.element._drawID===t._drawID;e._log("["+u.src+"] "+(c?"ACTIVE":"stale")+" "+(u.shifted?"steady":"DRIFT"),u.element)}},r(e,null,[{key:"alternateOutput",get:function(){return yt},set:function(t){yt=t}}]),e}(l);t.StageGL=a,t.Stage=b,t.Container=w,t.DisplayObject=m,t.Bitmap=S,t.BitmapText=D,t.DOMElement=L,t.Graphics=I,t.Arc=O,t.ArcTo=k,t.BeginPath=G,t.BezierCurveTo=F,t.Circle=W,t.ClosePath=X,t.Ellipse=V,t.Fill=N,t.LineTo=A,t.MoveTo=P,t.PolyStar=z,t.QuadraticCurveTo=R,t.Rect=B,t.RoundRect=j,t.Stroke=Y,t.StrokeDash=H,t.StrokeStyle=U,t.MovieClip=J,t.Shadow=K,t.Shape=Z,t.Sprite=T,t.SpriteSheet=$,t.Text=it,t.MouseEvent=x,t.AlphaMapFilter=rt,t.AlphaMaskFilter=st,t.BitmapCache=_,t.BlurFilter=ht,t.ColorFilter=lt,t.ColorMatrix=pt,t.ColorMatrixFilter=dt,t.Filter=g,t.DisplayProps=f,t.Matrix2D=d,t.Point=p,t.Rectangle=v,t.ButtonHelper=ft,t.Touch=vt,t.SpriteSheetBuilder=gt,t.SpriteSheetUtils=_t,t.UID=c,t.WebGLInspector=wt,(t.versions=t.versions||{}).easeljs="2.0.0"}(this.createjs=this.createjs||{},this.createjs&&this.createjs.Tween,this.createjs&&this.createjs.Timeline);